{% extends 'user_panel/base_user_panel/base_template.html' %}
{% block content %}
    <form action="{% url 'prenotation_submit' %}" method="POST" id="prenotation_form">{% csrf_token %}</form>
    <div class="content mt-3">
        <div class="col-12">
            <div class="card">
                <div class="card-header">
                    <strong>Prenotazione</strong>
                </div>
                <div class="card-body card-block">
{#                    {% if count < 3 %}#}
{#                    <div class="sufee-alert alert with-close alert-info alert-dismissible fade show"#}
{#                         role="alert">#}
{#                        <button type="button" class="close" data-dismiss="alert" aria-label="Close">#}
{#                            <span aria-hidden="true">&times;</span>#}
{#                        </button>#}
{#                        <h4 class="alert-heading">Informazione</h4>#}
{#                        <p>Puoi effettuare la prenotazione al club scegliendo il corso, la data e, se disponibile, una#}
{#                            fascia oraria.</p>#}
{#                        <p>La prenotazione avviene un giorno per volta, in modo tale da darti la possibilità di poter#}
{#                            scegliere con calma le informazioni necessarie.</p>#}
{#                        <p>Potrai effettuare un massimo di 3 prenotazioni per settimana</p>#}
{#                    </div>#}

                    <div class="col-12 col-md-6 col-lg-6 col-xl-6">
                        <label class="form-control-label">Scegli corso</label>
                        {{ form.course }}
                    </div>
                    <div id="course_day">
                        <div class="col-12 col-md-6 col-lg-6 col-xl-6">
                            <label class="form-control-label">Scegli data</label>
                            <input type="text" form="prenotation_form" autocomplete="off" readonly
                                   onfocus="this.removeAttribute('readonly');" name="date_form" class="form-control"
                                   id="date">
                        </div>
                    </div>

                    <div id="course_hours" class="input-group my-5 py-4">
                        <div class="col-12 col-md-6 col lg-6 col-xl-6 offset-md-3 offset-lg-3 offset-xl-3">
                            <label class="form-control-label">Scegli la fascia oraria a cui vuoi iscriverti</label>
                            <select name="course_hours" form="prenotation_form" class="form-control"
                                    id="course_hours_select">
                            </select>
                        </div>
                        <div id="alert_prenotation" class="mt-2 mx-auto">
                            <div class="sufee-alert alert with-close alert-warning alert-dismissible fade show"
                                 role="alert">
                                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                                <h4 class="alert-heading">Attenzione!</h4>
                                <p>La disdetta della prenotazione deve avvenire entro 2{{ dismiss_prenotation }}h
                                    prima
                                    dell'inizio del corso scelto.</p>
                                <p>Nel caso in cui non venga effettuata, verrà considerata comunque la presenza in
                                    sede.</p>
                                <hr>
                                <p class="mb-0">Per maggiori informazioni rivolgiti in segreteria o accedi alla
                                    sezione
                                    "Disdici Prenotazione".</p>
                            </div>
                            <div id="status_prenotation"></div>
                            <div class="p-0" id="details_prenotation">
                                <h4>Riepilogo prenotazione</h4>
                                <ul class="mt-2" style="list-style: none">
                                    <li id="course_name"></li>
                                    <li id="hours_name">Fascia oraria:</li>
                                    <li><p>Nome e cognome: {{ user.first_name }} {{ user.last_name }}</p></li>
                                    <li id="date_name"></li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="pt-5 pl-3 mt-5" id="alert_error"></div>

{#                    {% else %}#}
{#                    <div class="sufee-alert alert with-close alert-danger alert-dismissible fade show"#}
{#                         role="alert">#}
{#                        <button type="button" class="close" data-dismiss="alert" aria-label="Close">#}
{#                            <span aria-hidden="true">&times;</span>#}
{#                        </button>#}
{#                        <h4 class="alert-heading">Attenzione</h4>#}
{#                        <p>Hai già effettuato 3 prenotazioni nella settimana.</p>#}
{#                        <p>Modifica o disdici una prenotazione per proseguire</p>#}
{#                    </div>#}
{#                      {% endif %}#}
                </div>

                <div class="card-footer">
                    <button type="submit" form="prenotation_form" class="btn btn-success btn-sm ">
                        <i class="fa fa-check"></i> Conferma prenotazione
                    </button>
{#                    <button type="reset" class="btn btn-danger btn-sm">#}
{#                        <i class="fa fa-ban"></i> Reset#}
{#                    </button>#}
                </div>
            </div>
        </div>
    </div>

{% endblock %}